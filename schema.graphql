type User @entity(immutable: true) {
  id: ID!
  createdAt: BigInt!
  createdAtBlock: BigInt!
}

type Transaction @entity(timeseries: true) {
  id: Int8!
  timestamp: Timestamp!
  type: String!
  userId: String!
  appId: String!
  gasUsed: BigInt!
  createdAt: BigInt!
  createdAtBlock: BigInt!
}

type TransactionStat @entity {
  id: ID!
  totalCount: Int8! @aggregate(fn: "count", cumulative: true)
  totalGasUsed: BigInt! @aggregate(fn: "sum", arg: "gasUsed", cumulative: true)
  createdAt: BigInt!
  createdAtBlock: BigInt!
  updatedAt: BigInt!
  updatedAtBlock: BigInt!
}

type TransactionTypeStat @entity {
  # `${transaction-type}`
  id: ID!
  type: String!
  totalCount: Int8! @aggregate(fn: "count", cumulative: true)
  totalGasUsed: BigInt! @aggregate(fn: "sum", arg: "gasUsed", cumulative: true)
  createdAt: BigInt!
  createdAtBlock: BigInt!
  updatedAt: BigInt!
  updatedAtBlock: BigInt!
}

type TransactionTypeAppStat @entity {
  # `${transaction-type}-${app-id}`
  id: ID!
  type: String!
  appId: String!
  totalCount: Int8! @aggregate(fn: "count", cumulative: true)
  totalGasUsed: BigInt! @aggregate(fn: "sum", arg: "gasUsed", cumulative: true)
  createdAt: BigInt!
  createdAtBlock: BigInt!
  updatedAt: BigInt!
  updatedAtBlock: BigInt!
}

type TransactionTypeUserStat @entity {
  # `${transaction-type}-${user-id}`
  id: ID!
  type: String!
  userId: String!
  totalCount: Int8! @aggregate(fn: "count", cumulative: true)
  totalGasUsed: BigInt! @aggregate(fn: "sum", arg: "gasUsed", cumulative: true)
  createdAt: BigInt!
  createdAtBlock: BigInt!
  updatedAt: BigInt!
  updatedAtBlock: BigInt!
}

type TransactionTypeUserAppStat @entity {
  # `${transaction-type}-${user-id}-${app-id}`
  id: ID!
  type: String!
  userId: String!
  appId: String!
  totalCount: Int8! @aggregate(fn: "count", cumulative: true)
  totalGasUsed: BigInt! @aggregate(fn: "sum", arg: "gasUsed", cumulative: true)
  createdAt: BigInt!
  createdAtBlock: BigInt!
  updatedAt: BigInt!
  updatedAtBlock: BigInt!
}

type TransactionAppStat @entity {
  # `${app-id}`
  id: ID!
  appId: String!
  totalCount: Int8! @aggregate(fn: "count", cumulative: true)
  totalGasUsed: BigInt! @aggregate(fn: "sum", arg: "gasUsed", cumulative: true)
  createdAt: BigInt!
  createdAtBlock: BigInt!
  updatedAt: BigInt!
  updatedAtBlock: BigInt!
}

type TransactionUserStat @entity {
  # `${user-id}`
  id: ID!
  userId: String!
  totalCount: Int8! @aggregate(fn: "count", cumulative: true)
  totalGasUsed: BigInt! @aggregate(fn: "sum", arg: "gasUsed", cumulative: true)
  createdAt: BigInt!
  createdAtBlock: BigInt!
  updatedAt: BigInt!
  updatedAtBlock: BigInt!
}

type TransactionUserAppStat @entity {
  # `${user-id}-${app-id}`
  id: ID!
  userId: String!
  appId: String!
  totalCount: Int8! @aggregate(fn: "count", cumulative: true)
  totalGasUsed: BigInt! @aggregate(fn: "sum", arg: "gasUsed", cumulative: true)
  createdAt: BigInt!
  createdAtBlock: BigInt!
  updatedAt: BigInt!
  updatedAtBlock: BigInt!
}